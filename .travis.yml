dist: bionic

language: python

python:
  # - "3.7"
  - "3.8"

before_install:
  - sudo apt-get update
  - sudo apt-get -y install gfortran-7 swig libgsl-dev libmpich-dev

install:
  - pip install cffi
  - pip install --no-binary=mpi4py -r requirements.txt
  - wget -O data.tar.gz  "https://portal.nersc.gov/cfs/lsst/txpipe/travis/small.tgz"
  - tar -zxvf data.tar.gz

cache:
  - pip: true
  - directories:
    - data/example

script:
  - ceci examples/travis/pipeline.yml
  - cat pipeline.log
