Photo-z files
=============

TXPipe photo-z files are mostly generated by calling stages from the RAIL package.

TXPipe selects the inputs to RAIL and uses its outputs. For per-galaxy photo-z PDFs TXPipe just uses the RAIL native table format. For ensemble (stacked) per-bin n(z) information, TXPipe calls RAIL functions but packages the data slightly differently because it wants to combine the n(z) from the different bins into a single file.

Photo-z PDF Files
-----------------

PDF files are stored in the QP schema in HDF5 format.  They are represented in TXPipe with the `QPPDFFile` class, or can be read directly with the QP tools.  Since the table scheme can vary significantly depending on which PZ algorithm is used, we won't describe the format here and don't recommend manually hacking them.



Photo-z n(z) Files
------------------

The n(z) files are stored in the QP schema, but not directly using QP, since we want to combine the n(z) from the different bins into a single file.  Instead each n(z) is stored in a separate HDF5 subgroups of the "qp" main group.

We use two classes for these files:

- `QPNOfZFile` - stores a single primary n(z) (usually the mean) for a bin.
- `QPMultiFile` - stores multiple n(z) realizations of the same bin.

